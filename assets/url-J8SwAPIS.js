import{c as he}from"./call-bind-CkPzBTRv.js";import{s as Se}from"./side-channel-CzTPmnEc.js";var se={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */se.exports;(function(t,e){(function(r){var a=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,f=typeof he=="object"&&he;(f.global===f||f.window===f||f.self===f)&&(r=f);var s,n=2147483647,l=36,i=1,c=26,O=38,b=700,m=72,v=128,S="-",x=/^xn--/,$=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-i,g=Math.floor,F=String.fromCharCode,z;function D(h){throw new RangeError(u[h])}function I(h,d){for(var y=h.length,w=[];y--;)w[y]=d(h[y]);return w}function N(h,d){var y=h.split("@"),w="";y.length>1&&(w=y[0]+"@",h=y[1]),h=h.replace(p,".");var A=h.split("."),R=I(A,d).join(".");return w+R}function G(h){for(var d=[],y=0,w=h.length,A,R;y<w;)A=h.charCodeAt(y++),A>=55296&&A<=56319&&y<w?(R=h.charCodeAt(y++),(R&64512)==56320?d.push(((A&1023)<<10)+(R&1023)+65536):(d.push(A),y--)):d.push(A);return d}function Y(h){return I(h,function(d){var y="";return d>65535&&(d-=65536,y+=F(d>>>10&1023|55296),d=56320|d&1023),y+=F(d),y}).join("")}function K(h){return h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:l}function _(h,d){return h+22+75*(h<26)-((d!=0)<<5)}function q(h,d,y){var w=0;for(h=y?g(h/b):h>>1,h+=g(h/d);h>C*c>>1;w+=l)h=g(h/C);return g(w+(C+1)*h/(h+O))}function U(h){var d=[],y=h.length,w,A=0,R=v,T=m,L,B,H,Z,P,M,Q,X,ee;for(L=h.lastIndexOf(S),L<0&&(L=0),B=0;B<L;++B)h.charCodeAt(B)>=128&&D("not-basic"),d.push(h.charCodeAt(B));for(H=L>0?L+1:0;H<y;){for(Z=A,P=1,M=l;H>=y&&D("invalid-input"),Q=K(h.charCodeAt(H++)),(Q>=l||Q>g((n-A)/P))&&D("overflow"),A+=Q*P,X=M<=T?i:M>=T+c?c:M-T,!(Q<X);M+=l)ee=l-X,P>g(n/ee)&&D("overflow"),P*=ee;w=d.length+1,T=q(A-Z,w,Z==0),g(A/w)>n-R&&D("overflow"),R+=g(A/w),A%=w,d.splice(A++,0,R)}return Y(d)}function J(h){var d,y,w,A,R,T,L,B,H,Z,P,M=[],Q,X,ee,le;for(h=G(h),Q=h.length,d=v,y=0,R=m,T=0;T<Q;++T)P=h[T],P<128&&M.push(F(P));for(w=A=M.length,A&&M.push(S);w<Q;){for(L=n,T=0;T<Q;++T)P=h[T],P>=d&&P<L&&(L=P);for(X=w+1,L-d>g((n-y)/X)&&D("overflow"),y+=(L-d)*X,d=L,T=0;T<Q;++T)if(P=h[T],P<d&&++y>n&&D("overflow"),P==d){for(B=y,H=l;Z=H<=R?i:H>=R+c?c:H-R,!(B<Z);H+=l)le=B-Z,ee=l-Z,M.push(F(_(Z+le%ee,0))),B=g(le/ee);M.push(F(_(B,0))),R=q(y,X,w==A),y=0,++w}++y,++d}return M.join("")}function fe(h){return N(h,function(d){return x.test(d)?U(d.slice(4).toLowerCase()):d})}function ie(h){return N(h,function(d){return $.test(d)?"xn--"+J(d):d})}if(s={version:"1.4.1",ucs2:{decode:G,encode:Y},decode:U,encode:J,toASCII:ie,toUnicode:fe},a&&o)if(t.exports==a)o.exports=s;else for(z in s)s.hasOwnProperty(z)&&(a[z]=s[z]);else r.punycode=s})(he)})(se,se.exports);var Ie=se.exports,Te=String.prototype.replace,Pe=/%20/g,ue={RFC1738:"RFC1738",RFC3986:"RFC3986"},be={default:ue.RFC3986,formatters:{RFC1738:function(t){return Te.call(t,Pe,"+")},RFC3986:function(t){return String(t)}},RFC1738:ue.RFC1738,RFC3986:ue.RFC3986},Ne=be,ce=Object.prototype.hasOwnProperty,re=Array.isArray,k=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Re=function(e){for(;e.length>1;){var r=e.pop(),a=r.obj[r.prop];if(re(a)){for(var o=[],f=0;f<a.length;++f)typeof a[f]<"u"&&o.push(a[f]);r.obj[r.prop]=o}}},Ae=function(e,r){for(var a=r&&r.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(a[o]=e[o]);return a},qe=function t(e,r,a){if(!r)return e;if(typeof r!="object"){if(re(e))e.push(r);else if(e&&typeof e=="object")(a&&(a.plainObjects||a.allowPrototypes)||!ce.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var o=e;return re(e)&&!re(r)&&(o=Ae(e,a)),re(e)&&re(r)?(r.forEach(function(f,s){if(ce.call(e,s)){var n=e[s];n&&typeof n=="object"&&f&&typeof f=="object"?e[s]=t(n,f,a):e.push(f)}else e[s]=f}),e):Object.keys(r).reduce(function(f,s){var n=r[s];return ce.call(f,s)?f[s]=t(f[s],n,a):f[s]=n,f},o)},Le=function(e,r){return Object.keys(r).reduce(function(a,o){return a[o]=r[o],a},e)},$e=function(t,e,r){var a=t.replace(/\+/g," ");if(r==="iso-8859-1")return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch{return a}},Ke=function(e,r,a,o,f){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),a==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var n="",l=0;l<s.length;++l){var i=s.charCodeAt(l);if(i===45||i===46||i===95||i===126||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||f===Ne.RFC1738&&(i===40||i===41)){n+=s.charAt(l);continue}if(i<128){n=n+k[i];continue}if(i<2048){n=n+(k[192|i>>6]+k[128|i&63]);continue}if(i<55296||i>=57344){n=n+(k[224|i>>12]+k[128|i>>6&63]+k[128|i&63]);continue}l+=1,i=65536+((i&1023)<<10|s.charCodeAt(l)&1023),n+=k[240|i>>18]+k[128|i>>12&63]+k[128|i>>6&63]+k[128|i&63]}return n},Me=function(e){for(var r=[{obj:{o:e},prop:"o"}],a=[],o=0;o<r.length;++o)for(var f=r[o],s=f.obj[f.prop],n=Object.keys(s),l=0;l<n.length;++l){var i=n[l],c=s[i];typeof c=="object"&&c!==null&&a.indexOf(c)===-1&&(r.push({obj:s,prop:i}),a.push(c))}return Re(r),e},ze=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Be=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Qe=function(e,r){return[].concat(e,r)},_e=function(e,r){if(re(e)){for(var a=[],o=0;o<e.length;o+=1)a.push(r(e[o]));return a}return r(e)},je={arrayToObject:Ae,assign:Le,combine:Qe,compact:Me,decode:$e,encode:Ke,isBuffer:Be,isRegExp:ze,maybeMap:_e,merge:qe},Fe=Se,oe=je,ne=be,Ue=Object.prototype.hasOwnProperty,Ce={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},V=Array.isArray,He=Array.prototype.push,Ee=function(t,e){He.apply(t,V(e)?e:[e])},ke=Date.prototype.toISOString,ge=ne.default,E={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:oe.encode,encodeValuesOnly:!1,format:ge,formatter:ne.formatters[ge],indices:!1,serializeDate:function(e){return ke.call(e)},skipNulls:!1,strictNullHandling:!1},Ve=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},pe={},Ge=function t(e,r,a,o,f,s,n,l,i,c,O,b,m,v,S,x,$,p){for(var u=e,C=p,g=0,F=!1;(C=C.get(pe))!==void 0&&!F;){var z=C.get(e);if(g+=1,typeof z<"u"){if(z===g)throw new RangeError("Cyclic object value");F=!0}typeof C.get(pe)>"u"&&(g=0)}if(typeof c=="function"?u=c(r,u):u instanceof Date?u=m(u):a==="comma"&&V(u)&&(u=oe.maybeMap(u,function(h){return h instanceof Date?m(h):h})),u===null){if(s)return i&&!x?i(r,E.encoder,$,"key",v):r;u=""}if(Ve(u)||oe.isBuffer(u)){if(i){var D=x?r:i(r,E.encoder,$,"key",v);return[S(D)+"="+S(i(u,E.encoder,$,"value",v))]}return[S(r)+"="+S(String(u))]}var I=[];if(typeof u>"u")return I;var N;if(a==="comma"&&V(u))x&&i&&(u=oe.maybeMap(u,i)),N=[{value:u.length>0?u.join(",")||null:void 0}];else if(V(c))N=c;else{var G=Object.keys(u);N=O?G.sort(O):G}var Y=l?r.replace(/\./g,"%2E"):r,K=o&&V(u)&&u.length===1?Y+"[]":Y;if(f&&V(u)&&u.length===0)return K+"[]";for(var _=0;_<N.length;++_){var q=N[_],U=typeof q=="object"&&typeof q.value<"u"?q.value:u[q];if(!(n&&U===null)){var J=b&&l?q.replace(/\./g,"%2E"):q,fe=V(u)?typeof a=="function"?a(K,J):K:K+(b?"."+J:"["+J+"]");p.set(e,g);var ie=Fe();ie.set(pe,p),Ee(I,t(U,fe,a,o,f,s,n,l,a==="comma"&&x&&V(u)?null:i,c,O,b,m,v,S,x,$,ie))}}return I},Ze=function(e){if(!e)return E;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||E.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var a=ne.default;if(typeof e.format<"u"){if(!Ue.call(ne.formatters,e.format))throw new TypeError("Unknown format option provided.");a=e.format}var o=ne.formatters[a],f=E.filter;(typeof e.filter=="function"||V(e.filter))&&(f=e.filter);var s;if(e.arrayFormat in Ce?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=E.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var n=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:E.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:E.addQueryPrefix,allowDots:n,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:E.allowEmptyArrays,arrayFormat:s,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:E.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?E.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:E.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:E.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:E.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:E.encodeValuesOnly,filter:f,format:a,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:E.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:E.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:E.strictNullHandling}},We=function(t,e){var r=t,a=Ze(e),o,f;typeof a.filter=="function"?(f=a.filter,r=f("",r)):V(a.filter)&&(f=a.filter,o=f);var s=[];if(typeof r!="object"||r===null)return"";var n=Ce[a.arrayFormat],l=n==="comma"&&a.commaRoundTrip;o||(o=Object.keys(r)),a.sort&&o.sort(a.sort);for(var i=Fe(),c=0;c<o.length;++c){var O=o[c];a.skipNulls&&r[O]===null||Ee(s,Ge(r[O],O,n,l,a.allowEmptyArrays,a.strictNullHandling,a.skipNulls,a.encodeDotInKeys,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.format,a.formatter,a.encodeValuesOnly,a.charset,i))}var b=s.join(a.delimiter),m=a.addQueryPrefix===!0?"?":"";return a.charsetSentinel&&(a.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),b.length>0?m+b:""},ae=je,de=Object.prototype.hasOwnProperty,Je=Array.isArray,j={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:ae.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Xe=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},De=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ye="utf8=%26%2310003%3B",er="utf8=%E2%9C%93",rr=function(e,r){var a={__proto__:null},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=r.parameterLimit===1/0?void 0:r.parameterLimit,s=o.split(r.delimiter,f),n=-1,l,i=r.charset;if(r.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===er?i="utf-8":s[l]===Ye&&(i="iso-8859-1"),n=l,l=s.length);for(l=0;l<s.length;++l)if(l!==n){var c=s[l],O=c.indexOf("]="),b=O===-1?c.indexOf("="):O+1,m,v;b===-1?(m=r.decoder(c,j.decoder,i,"key"),v=r.strictNullHandling?null:""):(m=r.decoder(c.slice(0,b),j.decoder,i,"key"),v=ae.maybeMap(De(c.slice(b+1),r),function(x){return r.decoder(x,j.decoder,i,"value")})),v&&r.interpretNumericEntities&&i==="iso-8859-1"&&(v=Xe(v)),c.indexOf("[]=")>-1&&(v=Je(v)?[v]:v);var S=de.call(a,m);S&&r.duplicates==="combine"?a[m]=ae.combine(a[m],v):(!S||r.duplicates==="last")&&(a[m]=v)}return a},tr=function(t,e,r,a){for(var o=a?e:De(e,r),f=t.length-1;f>=0;--f){var s,n=t[f];if(n==="[]"&&r.parseArrays)s=r.allowEmptyArrays&&o===""?[]:[].concat(o);else{s=r.plainObjects?Object.create(null):{};var l=n.charAt(0)==="["&&n.charAt(n.length-1)==="]"?n.slice(1,-1):n,i=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(i,10);!r.parseArrays&&i===""?s={0:o}:!isNaN(c)&&n!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[],s[c]=o):i!=="__proto__"&&(s[i]=o)}o=s}return o},ar=function(e,r,a,o){if(e){var f=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,l=a.depth>0&&s.exec(f),i=l?f.slice(0,l.index):f,c=[];if(i){if(!a.plainObjects&&de.call(Object.prototype,i)&&!a.allowPrototypes)return;c.push(i)}for(var O=0;a.depth>0&&(l=n.exec(f))!==null&&O<a.depth;){if(O+=1,!a.plainObjects&&de.call(Object.prototype,l[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+f.slice(l.index)+"]"),tr(c,r,a,o)}},nr=function(e){if(!e)return j;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?j.charset:e.charset,a=typeof e.duplicates>"u"?j.duplicates:e.duplicates;if(a!=="combine"&&a!=="first"&&a!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var o=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:j.allowDots:!!e.allowDots;return{allowDots:o,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:j.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:j.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:j.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:j.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:j.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:j.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:j.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:j.decoder,delimiter:typeof e.delimiter=="string"||ae.isRegExp(e.delimiter)?e.delimiter:j.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:j.depth,duplicates:a,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:j.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:j.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:j.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:j.strictNullHandling}},ir=function(t,e){var r=nr(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var a=typeof t=="string"?rr(t,r):t,o=r.plainObjects?Object.create(null):{},f=Object.keys(a),s=0;s<f.length;++s){var n=f[s],l=ar(n,a[n],r,typeof t=="string");o=ae.merge(o,l,r)}return r.allowSparse===!0?o:ae.compact(o)},or=We,sr=ir,fr=be,lr={formats:fr,parse:sr,stringify:or},hr=Ie;function W(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ur=/^([a-z0-9.+-]+:)/i,cr=/:[0-9]*$/,pr=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,dr=["<",">",'"',"`"," ","\r",`
`,"	"],mr=["{","}","|","\\","^","`"].concat(dr),me=["'"].concat(mr),xe=["%","/","?",";","#"].concat(me),we=["/","?","#"],yr=255,Oe=/^[+a-z0-9A-Z_-]{0,63}$/,vr=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,br={javascript:!0,"javascript:":!0},ye={javascript:!0,"javascript:":!0},te={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ve=lr;function gr(t,e,r){if(t&&typeof t=="object"&&t instanceof W)return t;var a=new W;return a.parse(t,e,r),a}W.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),o=a!==-1&&a<t.indexOf("#")?"?":"#",f=t.split(o),s=/\\/g;f[0]=f[0].replace(s,"/"),t=f.join(o);var n=t;if(n=n.trim(),!r&&t.split("#").length===1){var l=pr.exec(n);if(l)return this.path=n,this.href=n,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=ve.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var i=ur.exec(n);if(i){i=i[0];var c=i.toLowerCase();this.protocol=c,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@/]+@[^@/]+/)){var O=n.substr(0,2)==="//";O&&!(i&&ye[i])&&(n=n.substr(2),this.slashes=!0)}if(!ye[i]&&(O||i&&!te[i])){for(var b=-1,m=0;m<we.length;m++){var v=n.indexOf(we[m]);v!==-1&&(b===-1||v<b)&&(b=v)}var S,x;b===-1?x=n.lastIndexOf("@"):x=n.lastIndexOf("@",b),x!==-1&&(S=n.slice(0,x),n=n.slice(x+1),this.auth=decodeURIComponent(S)),b=-1;for(var m=0;m<xe.length;m++){var v=n.indexOf(xe[m]);v!==-1&&(b===-1||v<b)&&(b=v)}b===-1&&(b=n.length),this.host=n.slice(0,b),n=n.slice(b),this.parseHost(),this.hostname=this.hostname||"";var $=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$)for(var p=this.hostname.split(/\./),m=0,u=p.length;m<u;m++){var C=p[m];if(C&&!C.match(Oe)){for(var g="",F=0,z=C.length;F<z;F++)C.charCodeAt(F)>127?g+="x":g+=C[F];if(!g.match(Oe)){var D=p.slice(0,m),I=p.slice(m+1),N=C.match(vr);N&&(D.push(N[1]),I.unshift(N[2])),I.length&&(n="/"+I.join(".")+n),this.hostname=D.join(".");break}}}this.hostname.length>yr?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=hr.toASCII(this.hostname));var G=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+G,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),n[0]!=="/"&&(n="/"+n))}if(!br[c])for(var m=0,u=me.length;m<u;m++){var K=me[m];if(n.indexOf(K)!==-1){var _=encodeURIComponent(K);_===K&&(_=escape(K)),n=n.split(K).join(_)}}var q=n.indexOf("#");q!==-1&&(this.hash=n.substr(q),n=n.slice(0,q));var U=n.indexOf("?");if(U!==-1?(this.search=n.substr(U),this.query=n.substr(U+1),e&&(this.query=ve.parse(this.query)),n=n.slice(0,U)):e&&(this.search="",this.query={}),n&&(this.pathname=n),te[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",J=this.search||"";this.path=G+J}return this.href=this.format(),this};W.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",a=this.hash||"",o=!1,f="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(f=ve.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||f&&"?"+f||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||te[e])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),a&&a.charAt(0)!=="#"&&(a="#"+a),s&&s.charAt(0)!=="?"&&(s="?"+s),r=r.replace(/[?#]/g,function(n){return encodeURIComponent(n)}),s=s.replace("#","%23"),e+o+r+s+a};W.prototype.resolve=function(t){return this.resolveObject(gr(t,!1,!0)).format()};W.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new W;e.parse(t,!1,!0),t=e}for(var r=new W,a=Object.keys(this),o=0;o<a.length;o++){var f=a[o];r[f]=this[f]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),n=0;n<s.length;n++){var l=s[n];l!=="protocol"&&(r[l]=t[l])}return te[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!te[t.protocol]){for(var i=Object.keys(t),c=0;c<i.length;c++){var O=i[c];r[O]=t[O]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!ye[t.protocol]){for(var u=(t.pathname||"").split("/");u.length&&!(t.host=u.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),u[0]!==""&&u.unshift(""),u.length<2&&u.unshift(""),r.pathname=u.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var b=r.pathname||"",m=r.search||"";r.path=b+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&r.pathname.charAt(0)==="/",S=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=S||v||r.host&&t.pathname,$=x,p=r.pathname&&r.pathname.split("/")||[],u=t.pathname&&t.pathname.split("/")||[],C=r.protocol&&!te[r.protocol];if(C&&(r.hostname="",r.port=null,r.host&&(p[0]===""?p[0]=r.host:p.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(u[0]===""?u[0]=t.host:u.unshift(t.host)),t.host=null),x=x&&(u[0]===""||p[0]==="")),S)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,p=u;else if(u.length)p||(p=[]),p.pop(),p=p.concat(u),r.search=t.search,r.query=t.query;else if(t.search!=null){if(C){r.host=p.shift(),r.hostname=r.host;var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.hostname=g.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!p.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var F=p.slice(-1)[0],z=(r.host||t.host||p.length>1)&&(F==="."||F==="..")||F==="",D=0,I=p.length;I>=0;I--)F=p[I],F==="."?p.splice(I,1):F===".."?(p.splice(I,1),D++):D&&(p.splice(I,1),D--);if(!x&&!$)for(;D--;D)p.unshift("..");x&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),z&&p.join("/").substr(-1)!=="/"&&p.push("");var N=p[0]===""||p[0]&&p[0].charAt(0)==="/";if(C){r.hostname=N?"":p.length?p.shift():"",r.host=r.hostname;var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.hostname=g.shift(),r.host=r.hostname)}return x=x||r.host&&p.length,x&&!N&&p.unshift(""),p.length>0?r.pathname=p.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};W.prototype.parseHost=function(){var t=this.host,e=cr.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};
